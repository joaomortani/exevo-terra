version: "1"

resources:
  rds:
    # O módulo que será usado no output (Pode ser o da sua empresa ou oficial)
    source: "./modules/rds-padrao"
    
    # Campo que será usado como identificador único do recurso (nome do módulo)
    primary_key: "DBInstanceIdentifier"

    resource_address: "aws_db_instance.this"

    # Mapeamento: Variável do Terraform <= Campo da API AWS
    # Lado Esquerdo: Nome da variável no variables.tf
    # Lado Direito: Nome do campo retornado pela struct da AWS (Case Sensitive)
    mappings:
      identifier: "DBInstanceIdentifier"
      engine: "Engine"
      engine_version: "EngineVersion"
      instance_class: "DBInstanceClass"
      allocated_storage: "AllocatedStorage"
      multi_az: "MultiAZ"
      storage_type: "StorageType"

    # Valores estáticos (opcionais, para coisas que não vêm da AWS)
    static:
      terraform_managed: true
      environment: "production"

  s3:
    # Usando o módulo oficial da comunidade como exemplo
    source: "terraform-aws-modules/s3-bucket/aws"
    
    # Campo que será usado como nome do módulo e ID de importação
    primary_key: "Name" 
    
    # Endereço do recurso dentro do módulo (padrão do módulo oficial)
    resource_address: "aws_s3_bucket.this" 

    mappings:
      # Variável do Terraform <= Campo da AWS (Case Sensitive!)
      bucket: "Name"
      
    static:
      # Valores que não vêm da API, mas queremos forçar
      acl: "private"
      control_object_ownership: true
      object_ownership: "ObjectWriter"
      versioning: { enabled: true } # Exemplo de map estático
  